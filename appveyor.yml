version: '{build}'

build_script:
  - mvn clean install
test_script:
#  - mvn clean install --batch-mode
after_build:
  - ps: $env:pom_artifactId = ([xml](Get-Content .\pom.xml)).project.artifactId
  - ps: $env:pom_version = ([xml](Get-Content .\pom.xml)).project.version
  - ps: Update-AppveyorBuild -Version "$env:pom_version-$env:APPVEYOR_BUILD_NUMBER"
  - set targetFileName=%pom_artifactId%-%pom_version%.jar
  - set appveyorFileName=%pom_artifactId%-%pom_version%-%APPVEYOR_BUILD_NUMBER%
cache:
  - C:\Users\appveyor\.m2
artifacts:
  - path: .\target\$(targetFileName)
    name: $(appveyorFileName)
